
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>upGrasppeHandle</title><meta name="generator" content="MATLAB 7.13"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2012-02-27"><meta name="DC.source" content="upGrasppeHandle.m"><style type="text/css">

body {
  background-color: white;
  margin:10px;
}

h1 {
  color: #990000; 
  font-size: x-large;
}

h2 {
  color: #990000;
  font-size: medium;
}

/* Make the text shrink to fit narrow windows, but not stretch too far in 
wide windows. */ 
p,h1,h2,div.content div {
  max-width: 600px;
  /* Hack for IE6 */
  width: auto !important; width: 600px;
}

pre.codeinput {
  background: #EEEEEE;
  padding: 10px;
}
@media print {
  pre.codeinput {word-wrap:break-word; width:100%;}
} 

span.keyword {color: #0000FF}
span.comment {color: #228B22}
span.string {color: #A020F0}
span.untermstring {color: #B20000}
span.syscmd {color: #B28C00}

pre.codeoutput {
  color: #666666;
  padding: 10px;
}

pre.error {
  color: red;
}

p.footer {
  text-align: right;
  font-size: xx-small;
  font-weight: lighter;
  font-style: italic;
  color: gray;
}

  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#3">Property Functions</a></li><li><a href="#4">Lower-Level Functions</a></li><li><a href="#7">Static Property Functions</a></li><li><a href="#8">Static Handle Functions</a></li></ul></div><pre class="codeinput"><span class="keyword">classdef</span> upGrasppeHandle &lt; dynamicprops
  <span class="comment">%GRASPPEHANDLE Grasppe Handle Superclass</span>


  <span class="keyword">properties</span> (SetAccess = protected, GetAccess = public)
    Primitive                 <span class="comment">% HG primitive handle</span>
    Parent
    Busy
  <span class="keyword">end</span>

  <span class="keyword">properties</span> (Constant = true, GetAccess = public, Transient = true)
    FigureProperties    = { <span class="string">'Name'</span>, <span class="string">'Renderer'</span>, <span class="string">'Visible'</span>, <span class="string">'Toolbar'</span>, <span class="string">'Menubar'</span>, <span class="string">'Color'</span>, <span class="string">'Units'</span>, <span class="string">'WindowStyle'</span>}; <span class="comment">%'Parent' };</span>
    TitleProperties     = {{<span class="string">'Title'</span>, <span class="string">'String'</span>}};
    PlotProperties      = {<span class="string">'Parent'</span>};
    SurfaceProperties   = {};
  <span class="keyword">end</span>

  <span class="keyword">methods</span>
</pre><h2>Property Functions<a name="3"></a></h2><pre class="codeinput">    <span class="keyword">function</span> options = getComponentOptions(obj)
      <span class="keyword">try</span>
        properties = obj.ComponentProperties;
        options = obj.getOptions(properties);
      <span class="keyword">catch</span>
        options = {};
      <span class="keyword">end</span>
    <span class="keyword">end</span>

    <span class="keyword">function</span> hParent = get.Parent(obj)
      hParent = obj.getParent();
      <span class="keyword">if</span> (isnan(hParent))
        hParent = obj.Parent;
      <span class="keyword">end</span>
    <span class="keyword">end</span>

    <span class="keyword">function</span> hParent = getParent(obj)
      hParent = NaN;
    <span class="keyword">end</span>

    <span class="keyword">function</span> [options properties] = getOptions(obj, names)
      options     = [];
      properties  = options;
      aliases     = names;

      <span class="keyword">if</span> (~iscellstr(names) &amp;&amp; length(names)&gt;0)
        <span class="keyword">for</span> i = 1:numel(names)
          name = names{i};
          <span class="keyword">if</span> ischar(name)
            <span class="comment">% object property name is same as alias!</span>
          <span class="keyword">elseif</span> (iscellstr(name) &amp;&amp; length(name)==1)
            aliases{i}    = char(names{i});
            names{i} = char(names{i});
          <span class="keyword">elseif</span> (iscellstr(name) &amp;&amp; length(name)==2)
            aliases{i}    = names{i}{1};
            names{i} = names{i}{2};
          <span class="keyword">else</span>
            aliases{i}    = <span class="string">''</span>;
            names{i} = <span class="string">''</span>;
          <span class="keyword">end</span>
        <span class="keyword">end</span>
      <span class="keyword">end</span>

      <span class="keyword">if</span> (iscellstr(names))
        options     = cell(1, numel(names).*2);
        properties  = options;
        pairs       = 0;

        <span class="keyword">for</span> i = 1:numel(names)
          name = names{i};

          <span class="keyword">if</span> isempty(name)
            <span class="keyword">continue</span>
          <span class="keyword">end</span>

          alias = aliases{i};

          value = obj.(alias);

          <span class="keyword">if</span> (~isempty(value))
            index = (pairs)*2 + 1;
            pairs = pairs + 1;
            options{index}      = name;
            options{index+1}    = value;
            properties{index}   = alias;
            properties{index+1} = value;
          <span class="keyword">end</span>
        <span class="keyword">end</span>
        options     = options(1:pairs*2);
        properties  = properties(1:pairs*2);
      <span class="keyword">end</span>

    <span class="keyword">end</span>

    <span class="keyword">function</span> obj = setOptions(obj, varargin)

      obj.Busy = true;
      <span class="keyword">try</span>
        [args values paired pairs] = Plots.upGrasppeHandle.parseOptions(obj, varargin{:});

        <span class="keyword">if</span> (paired)
          <span class="keyword">for</span> i=1:numel(args)
            obj.(args{i}) = values{i};
          <span class="keyword">end</span>
        <span class="keyword">end</span>
      <span class="keyword">end</span>
      obj.Busy = false;

    <span class="keyword">end</span>

    <span class="keyword">function</span> handles   = getHandles(obj, tag, type, parent, varargin)
      handles = Plots.upGrasppeHandle.findObjects(tag, type, parent, varargin{:});
    <span class="keyword">end</span>

    <span class="keyword">function</span> handle = getHandle(obj, tag, type, parent, varargin)

      pVisibility = get(parent,<span class="string">'HandleVisibility'</span>);
      set(parent,<span class="string">'HandleVisibility'</span>, <span class="string">'on'</span>);
      args = {tag, type, parent, varargin{:}};
      handle = Plots.upGrasppeHandle.findObjects(args{:});

      <span class="keyword">if</span> numel(handle)&gt;1
        delete(handle(2:end));
        handle = Plots.upGrasppeHandle.findObjects(args{:});
      <span class="keyword">end</span>

      set(parent,<span class="string">'HandleVisibility'</span>, pVisibility);

    <span class="keyword">end</span>
</pre><h2>Lower-Level Functions<a name="4"></a></h2><pre class="codeinput">    <span class="keyword">function</span> value  = getStatic(obj, specifier)
      <span class="keyword">try</span>
        <span class="keyword">if</span> ischar(obj)
          className = obj;
        <span class="keyword">else</span>
          className = class(obj);
        <span class="keyword">end</span>
        value = eval([className <span class="string">'.'</span> specifier]);
      <span class="keyword">catch</span> err
        disp(err);
      <span class="keyword">end</span>
    <span class="keyword">end</span>
</pre><pre class="codeinput">  <span class="keyword">end</span>

  methods (Static)
</pre><h2>Static Property Functions<a name="7"></a></h2><pre class="codeinput">    <span class="keyword">function</span> [args values paired pairs] = parseOptions(obj, varargin)

      pairs = 0;

      varargin{:};

      [nargs paired args values] = pairedArgs(varargin{:});

      <span class="keyword">if</span> (nargs==0)
        <span class="keyword">return</span>;
      <span class="keyword">end</span>

      <span class="keyword">if</span> (isstruct(varargin{1}))
        varStruct = varargin{1};
        nStruct   = 1;
        <span class="keyword">if</span> length(varargin)&gt;1 &amp;&amp; isstruct(varargin{2})
          nStruct = 2;
          extraStruct = varargin{2};
          extraFields = fieldnames(extraStruct);
          <span class="keyword">for</span> f = 1:numel(extraFields)
            field = extraFields{f};
            varStruct.(field) = extraStruct.(field);
          <span class="keyword">end</span>
        <span class="keyword">end</span>
        [args values pairs] = structPair(varStruct);
        paired    = pairs &gt; 0;

        <span class="keyword">if</span> (length(varargin) &gt; nStruct)
          extras = varargin(nStruct+1:end);
          [nargs paired extraArgs extraValues] = pairedArgs(extras{:});

          <span class="keyword">if</span> (paired &amp;&amp; nargs &gt; 0)
            args    = {args{:},   extraArgs{:}};
            values  = {values{:}, extraValues{:}};
          <span class="keyword">end</span>

        <span class="keyword">end</span>
      <span class="keyword">end</span>

      pairs     = numel(args);
      paired    = (numel(args)==numel(values) &amp;&amp; pairs&gt;0);

    <span class="keyword">end</span>
</pre><h2>Static Handle Functions<a name="8"></a></h2><pre class="codeinput">    <span class="keyword">function</span> hobj = findObjects(tag, type, parent, varargin)

      args = {}; hobj = [];

      <span class="keyword">if</span> (isValid(<span class="string">'tag'</span>, <span class="string">'char'</span>))
        args = {args{:}, <span class="string">'Tag'</span>, tag};
      <span class="keyword">end</span>

      <span class="keyword">if</span> (isValid(<span class="string">'type'</span>, <span class="string">'char'</span>))
        args = {args{:}, <span class="string">'Type'</span>, type};
      <span class="keyword">end</span>

      <span class="keyword">if</span> (~isempty(varargin))
        args = {args{:}, varargin{:}};
      <span class="keyword">end</span>

      <span class="keyword">try</span>
        <span class="keyword">if</span> (isValid(<span class="string">'parent'</span>, <span class="string">'handle'</span>))
          hobj = findobj(allchild(parent),args{:});
        <span class="keyword">else</span>
          hobj = findobj(findall(0), args{:});
        <span class="keyword">end</span>
      <span class="keyword">end</span>

    <span class="keyword">end</span>
</pre><pre class="codeinput">  <span class="keyword">end</span>

<span class="keyword">end</span>
</pre><p class="footer"><br>
      Published with MATLAB&reg; 7.13<br></p></div><!--
##### SOURCE BEGIN #####
classdef upGrasppeHandle < dynamicprops
  %GRASPPEHANDLE Grasppe Handle Superclass
  
  
  properties (SetAccess = protected, GetAccess = public)
    Primitive                 % HG primitive handle
    Parent
    Busy
  end
  
  properties (Constant = true, GetAccess = public, Transient = true)
    FigureProperties    = { 'Name', 'Renderer', 'Visible', 'Toolbar', 'Menubar', 'Color', 'Units', 'WindowStyle'}; %'Parent' };
    TitleProperties     = {{'Title', 'String'}};
    PlotProperties      = {'Parent'};
    SurfaceProperties   = {};
  end  
    
  methods
    
    %% Property Functions
    function options = getComponentOptions(obj)
      try
        properties = obj.ComponentProperties;
        options = obj.getOptions(properties);
      catch
        options = {};
      end
    end
    
    function hParent = get.Parent(obj)
      hParent = obj.getParent();
      if (isnan(hParent))
        hParent = obj.Parent;
      end
    end
    
    function hParent = getParent(obj)
      hParent = NaN;
    end
    
    function [options properties] = getOptions(obj, names)
      options     = [];
      properties  = options;
      aliases     = names;
      
      if (~iscellstr(names) && length(names)>0)
        for i = 1:numel(names)
          name = names{i};
          if ischar(name)
            % object property name is same as alias!
          elseif (iscellstr(name) && length(name)==1)
            aliases{i}    = char(names{i});
            names{i} = char(names{i});
          elseif (iscellstr(name) && length(name)==2)
            aliases{i}    = names{i}{1};
            names{i} = names{i}{2};
          else
            aliases{i}    = '';
            names{i} = '';
          end
        end
      end
      
      if (iscellstr(names))
        options     = cell(1, numel(names).*2);
        properties  = options;
        pairs       = 0;
        
        for i = 1:numel(names)
          name = names{i};
          
          if isempty(name)
            continue
          end
          
          alias = aliases{i};
          
          value = obj.(alias);
          
          if (~isempty(value))
            index = (pairs)*2 + 1;
            pairs = pairs + 1;
            options{index}      = name;
            options{index+1}    = value;
            properties{index}   = alias;
            properties{index+1} = value;
          end
        end
        options     = options(1:pairs*2);
        properties  = properties(1:pairs*2);
      end
      
    end
    
    function obj = setOptions(obj, varargin)
      
      obj.Busy = true;
      try
        [args values paired pairs] = Plots.upGrasppeHandle.parseOptions(obj, varargin{:});

        if (paired)
          for i=1:numel(args)
            obj.(args{i}) = values{i};
          end
        end
      end
      obj.Busy = false;
      
    end 
    
    function handles   = getHandles(obj, tag, type, parent, varargin)
      handles = Plots.upGrasppeHandle.findObjects(tag, type, parent, varargin{:});
    end
    
    function handle = getHandle(obj, tag, type, parent, varargin)

      pVisibility = get(parent,'HandleVisibility');
      set(parent,'HandleVisibility', 'on');    
      args = {tag, type, parent, varargin{:}};
      handle = Plots.upGrasppeHandle.findObjects(args{:});
      
      if numel(handle)>1
        delete(handle(2:end));
        handle = Plots.upGrasppeHandle.findObjects(args{:});
      end
      
      set(parent,'HandleVisibility', pVisibility);
      
    end    
        
    %% Lower-Level Functions
    
    function value  = getStatic(obj, specifier)
      try
        if ischar(obj)
          className = obj;
        else
          className = class(obj);
        end
        value = eval([className '.' specifier]);
      catch err
        disp(err);
      end
    end
    
  end
  
  methods (Static)
    
    %% Static Property Functions
    
    function [args values paired pairs] = parseOptions(obj, varargin)
      
      pairs = 0;
      
      varargin{:};
      
      [nargs paired args values] = pairedArgs(varargin{:});
      
      if (nargs==0)
        return;
      end
      
      if (isstruct(varargin{1}))
        varStruct = varargin{1};
        nStruct   = 1;
        if length(varargin)>1 && isstruct(varargin{2})
          nStruct = 2;
          extraStruct = varargin{2};
          extraFields = fieldnames(extraStruct);
          for f = 1:numel(extraFields)
            field = extraFields{f};
            varStruct.(field) = extraStruct.(field);
          end
        end
        [args values pairs] = structPair(varStruct);
        paired    = pairs > 0;
        
        if (length(varargin) > nStruct)
          extras = varargin(nStruct+1:end);
          [nargs paired extraArgs extraValues] = pairedArgs(extras{:});
          
          if (paired && nargs > 0)
            args    = {args{:},   extraArgs{:}};
            values  = {values{:}, extraValues{:}};
          end
          
        end
      end
      
      pairs     = numel(args);
      paired    = (numel(args)==numel(values) && pairs>0);
      
    end
    
    %% Static Handle Functions
    
    function hobj = findObjects(tag, type, parent, varargin)
      
      args = {}; hobj = [];
      
      if (isValid('tag', 'char'))
        args = {args{:}, 'Tag', tag};
      end
      
      if (isValid('type', 'char'))
        args = {args{:}, 'Type', type};
      end
      
      if (~isempty(varargin))
        args = {args{:}, varargin{:}};
      end
      
      try
        if (isValid('parent', 'handle'))
          hobj = findobj(allchild(parent),args{:});
        else
          hobj = findobj(findall(0), args{:});
        end
      end

    end
    
  end
  
end


##### SOURCE END #####
--></body></html>